<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academia 4.3.1">
  <meta name="generator" content="Hugo 0.101.0" />

  

  
  
  
  
  
  

  

  
  
  
    
  
  <meta name="description" content="Introduction Hi, I&rsquo;m Glenn Fiedler. Welcome to Virtual Go, my project to create a physically accurate computer simulation of a Go board and stones.
If you play Go, you know that a biconvex go stone has an interesting wobble when it&rsquo;s placed on the board. This wobble is a direct consequence of its unique shape.
I&rsquo;d like to reproduce this wobble in Virtual Go, so let&rsquo;s to spend some time studying go stone&rsquo;s shape, so we can capture this wobble and simulate it on a computer :)">

  
  <link rel="alternate" hreflang="en-us" href="https://gafferongames.com/post/shape_of_the_go_stone/">

  


  

  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academiaons/1.8.6/css/academiaons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Open+Sans|Roboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academia.min.88bfd34630258dde91b90e40ca4fc6a8.css">

  

  
  
  

  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://gafferongames.com/post/shape_of_the_go_stone/">

  
  
  
  
    
    
  
  <meta property="twitter:card" content="summary">
  
  <meta property="twitter:site" content="@gafferongames">
  <meta property="twitter:creator" content="@gafferongames">
  
  <meta property="og:site_name" content="Gaffer On Games">
  <meta property="og:url" content="https://gafferongames.com/post/shape_of_the_go_stone/">
  <meta property="og:title" content="Shape of The Go Stone | Gaffer On Games">
  <meta property="og:description" content="Introduction Hi, I&rsquo;m Glenn Fiedler. Welcome to Virtual Go, my project to create a physically accurate computer simulation of a Go board and stones.
If you play Go, you know that a biconvex go stone has an interesting wobble when it&rsquo;s placed on the board. This wobble is a direct consequence of its unique shape.
I&rsquo;d like to reproduce this wobble in Virtual Go, so let&rsquo;s to spend some time studying go stone&rsquo;s shape, so we can capture this wobble and simulate it on a computer :)"><meta property="og:image" content="https://gafferongames.com/img/icon-192.png">
  <meta property="twitter:image" content="https://gafferongames.com/img/icon-192.png"><meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2013-02-19T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2013-02-19T00:00:00&#43;00:00">
  

  


  





  <title>Shape of The Go Stone | Gaffer On Games</title>

</head>


<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Gaffer On Games</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation"><span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Articles</span></a>
        </li>

        
        

      

        

        

        

        

      </ul>

    </div>
  </div>
</nav>


  <article class="article py-5" itemscope itemtype="http://schema.org/Article">

  












    

    
    
    
    <div class="article-container py-3">
      <h1 itemprop="name">Shape of The Go Stone</h1>

      

      
      



<meta content="2013-02-19 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2013-02-19 00:00:00 &#43;0000 UTC" itemprop="dateModified">

<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    <time>Feb 19, 2013</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    5 min read
  </span>
  

  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder"></i>
    <a href="/categories/virtual-go/">Virtual Go</a></span>
  

  
    

  

</div>

      














      
      
    </div>
  </div>
</div>

  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      <h2 id="introduction">Introduction</h2>
<p>Hi, I&rsquo;m <a href="https://gafferongames.com">Glenn Fiedler</a>. Welcome to <a href="/categories/virtual-go/"><strong>Virtual Go</strong></a>, my project to create a physically accurate computer simulation of a Go board and stones.</p>
<p>If you play Go, you know that a biconvex go stone has an interesting wobble when it&rsquo;s placed on the board. This wobble is a direct consequence of its unique shape.</p>
<p>I&rsquo;d like to reproduce this wobble in Virtual Go, so let&rsquo;s to spend some time studying go stone&rsquo;s shape, so we can capture this wobble and simulate it on a computer :)</p>
<h2 id="slate-and-shell">Slate And Shell</h2>
<p>In Japan, Go stones are traditionally made out of slate and clam shell.</p>
<img src="/img/virtualgo/slate-and-shell-in-ko.jpg" alt="slate and shell in ko" width="100%"/>
<p>Clam shell stones come in several grades of quality. The highest being yuki or &ldquo;snow&rdquo; grade with fine, regularly spaced lines.</p>
<p>Go stones also come in different sizes. In general, the thicker the stone, the more expensive it is, as only a small portion of the clam shell is suitable for making them.</p>
<img src="/img/virtualgo/go-stone-side-profile-sizes.png" alt="go stone side profile sizes" width="100%"/>
<p>At first glance the go stone looks like an ellipse, but side-on you can see this is not the case. This shape is called a <em>biconvex solid</em>. I find this shape interesting because it is the intersection of two spheres.</p>
<p>We can study this shape by looking at the intersection of two circles:</p>
<img src="/img/virtualgo/biconvex.gif" alt="biconvex" width="75%"/>
<p>I quickly noticed that by varying the radius of the circles and the distance between their centers, I could generate go stones of different sizes.</p>
<p>But when creating a go stone I don&rsquo;t really want it to be parameterized this way.</p>
<p>Instead I&rsquo;d like to say, &ldquo;Hey, I would like a stone of this width and height&rdquo; and have a function that calculates the radius of the circles and how far apart they should be to generate that stone.</p>
<p>To write this function we first need to do some math:</p>
<img src="/img/virtualgo/biconvex-unknowns.png" alt="biconvex unknowns" width="75%"/>
<p>First notice that the point Q lies on the generating circle, so the line CQ has length r:</p>
<p><em>todo: obviously I have a bunch of work to get the latex equations ported across to Hugo. I&rsquo;m researching different options&hellip;</em></p>
<p>[latex size=&ldquo;2&rdquo;]d + h/2 = r[/latex]
[latex size=&ldquo;2&rdquo;]d = r - h/2[/latex]</p>
<p>The point P is also on the generating circle so the green line CP has length r as well. Using Pythagoras theorem and substituting for d:</p>
<p>[latex size=&ldquo;2&rdquo;]r^2 = d^2 + (w/2)^2[/latex]
[latex size=&ldquo;2&rdquo;]r^2 = ( r - h/2 )^2 + (w/2)^2[/latex]
[latex size=&ldquo;2&rdquo;]r^2 = ( h^2/4 - hr + r^2 ) + w^2/4[/latex]
[latex size=&ldquo;2&rdquo;]r^2 = h^2/4 - hr + r^2 + w^2/4[/latex]
[latex size=&ldquo;2&rdquo;]0 = h^2/4 - hr + 0 + w^2/4[/latex]
[latex size=&ldquo;2&rdquo;]hr = h^2/4 + w^2/4[/latex]
[latex size=&ldquo;2&rdquo;]r = ( h^2 + w^2 ) / 4h[/latex]</p>
<p>Which gives us everything we need to write the function:</p>
<pre><code>    void calculateBiconvex( float w,  
                            float h, 
                            float &amp; r, 
                            float &amp; d )
    {
        r = ( w*w + h*h ) / ( 4*h );
        d = r - h/2;
    }
</code></pre>
<p>Now we can mathematically define a go stone parameterized by its width and height. There is just one problem: the edge is very sharp!</p>
<p>To make our stone aesthetically pleasing, lets round the edge with a bevel. Otherwise, you might cut yourself virtually when you play with it:</p>
<img src="/img/virtualgo/go-stone-smooth-bevel.jpg" alt="go stone smooth bevel" width="100%"/>
<p>Let&rsquo;s parameterize the bevel by its height b:</p>
<img src="/img/virtualgo/bevel-b.gif" alt="torus bevel height b" width="75%"/>
<p>In three dimensions the bevel is actually a torus (donut) around the edge of the go stone. We need to calculate the major and minor radii r<sub>1</sub> and r<sub>2</sub> of the torus as a function of b and the dimensions of the go stone:</p>
<img src="/img/virtualgo/bevel-math-1.gif" alt="bevel math part 1" width="100%"/>
<p>The key to solving this is to realize that if the go stone and the bevel are to match perfectly then the tangent of the two circles must be equal at the point P.</p>
<p><em><em>Update</em>: A few years later and it occurs to me that it would be even more beautiful if the second derivative matched at this intersection as well. Is this possible in general, or must the generating spheres become to ellipses in order to make this happen? I suspect this is the case. Mathematicians who play Go, <a href="/contact">let me know your thoughts</a>.</em></p>
<img src="/img/virtualgo/bevel-math-2.gif" alt="bevel math part 2" width="100%"/>
<p>If the tangent is equal then the normal must be equal as well. This means that the center of the bevel circle lies at the intersection of the line CP and the x axis.</p>
<p>We already know C so if we can find the point P then we can find this intersection point. Once we know the intersection point we can find r<sub>1</sub> and r<sub>2</sub>.</p>
<p>Since P is at the start of the bevel:</p>
<p>[latex size=&ldquo;2&rdquo;]P_y = b/2[/latex]</p>
<p>Because P lies on the biconvex circle with center C and radius r we can use the equation of the circle to find x as a function of y:</p>
<p>[latex size=&ldquo;2&rdquo;]x^2 + y^2 = r^2[/latex]
[latex size=&ldquo;2&rdquo;]x = \sqrt{ r^2 - y^2 }[/latex]</p>
<p>We need y relative to the circle center C, not in go stone coordinates, so we add d and substitute y&rsquo; for y:</p>
<p>[latex size=&ldquo;2&rdquo;]y&rsquo; = b/2 + d[/latex]
[latex size=&ldquo;2&rdquo;]P_x = \sqrt{ r^2 - ( b/2 + d )^2 }[/latex]</p>
<p>We can now find r<sub>1</sub> by similar triangles:</p>
<p>[latex size=&ldquo;2&rdquo;]r_1/P_x = d / ( d + b/2 )[/latex]
[latex size=&ldquo;2&rdquo;]r_1 = P_x d / ( d + b/2 )[/latex]</p>
<p>and q by Pythagoras theorem:</p>
<p>[latex size=&ldquo;2&rdquo;]q^2 = d^2 + r_1^2[/latex]
[latex size=&ldquo;2&rdquo;]q = \sqrt{ d^2 + r_1^2 }[/latex]</p>
<p>Because line CP has length r and substituting for q:</p>
<p>[latex size=&ldquo;2&rdquo;]q + r_2 = r[/latex]
[latex size=&ldquo;2&rdquo;]r_2 = r - q[/latex]
[latex size=&ldquo;2&rdquo;]r_2 = r - \sqrt{ d^2 + r_1^2 }[/latex]</p>
<p>Now we have everything we need to write the function:</p>
<pre><code>    void calculate_bevel( float r, float d, float b, 
                          float &amp; r1, float &amp; r2 )
    {
        const float y = b/2 + d;
        const float px = sqrt( r*r - y*y );
        r1 = px * d / ( d + b/2 ); 
        r2 = r - sqrt( d*d + r1*r1 );
    }
</code></pre>
<p>Now we can calculate the bevel torus to round off any go stone we create as the intersection of two spheres.</p>
<p><strong>NEXT ARTICLE:</strong> <a href="/post/tessellating_the_go_stone">Tessellating The Go Stone</a></p>
<hr>
<p><strong>Glenn Fiedler</strong> is the founder and CEO of <strong><a href="https://networknext.com">Network Next</a></strong>.<br><i>Network Next is fixing the internet for games by creating a marketplace for premium network transit.</i></p>

    </div>

    

<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/physics/">physics</a>
  
  <a class="badge badge-light" href="/tags/go/baduk/weiqi/">go/baduk/weiqi</a>
  
</div>



    
      








  
  
  





  
  
  
  
  <div class="media author-card" itemscope itemtype="http://schema.org/Person">
    

    <div class="media-body">
      <h5 class="card-title" itemprop="name"><a href="/authors/"></a></h5>
      
      
      <ul class="network-icon" aria-hidden="true">
        
      </ul>
    </div>
  </div>



      
      
      <div class="article-widget">
        <div class="hr-light"></div>
        <h3>Related</h3>
        <ul>
          
          <li><a href="/post/introduction_to_virtual_go/">Introduction to Virtual Go</a></li>
          
          <li><a href="/post/networked_physics_2004/">Networked Physics (2004)</a></li>
          
          <li><a href="/post/spring_physics/">Spring Physics</a></li>
          
          <li><a href="/post/physics_in_3d/">Physics in 3D</a></li>
          
          <li><a href="/post/fix_your_timestep/">Fix Your Timestep!</a></li>
          
        </ul>
      </div>
      
    

    

    


  </div>
</article>

      

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academia.min.b8df6754deca2dd84ba46243e6dcb3e3.js"></script>

    






  
  <div class="container">
    <footer class="site-footer">

  <div class="container">
    <div class="row">
      <div class="col-md-6">
        
        <p>
          Copyright Â© Glenn Fiedler, 2004 - 2020 
        </p>
      </div>
      <div class="col-md-6">
        <ul class="list-inline network-icon text-right">
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://twitter.com/Twitter" target="_blank" rel="noopener" title="DM Me"><i class="fab fa-twitter" aria-hidden="true"></i></a>
          </li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>
  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
